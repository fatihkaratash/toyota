# Application info
spring.application.name=main-application
logging.config=classpath:log4j2.xml
subscribers.config.path=classpath:subscribers.json
app.calculator.config.path=classpath:calculation-config.json
server.port=8082

# Redis configuration - DOCKER ENVIRONMENT İÇİN
spring.redis.host=redis
spring.redis.port=6379
spring.redis.database=0
spring.redis.timeout=5000
app.cache.raw-rate.ttl-seconds=300
app.cache.calculated-rate.ttl-seconds=300

# Kafka Configuration - DUAL SERIALIZER SUPPORT
spring.kafka.bootstrap-servers=kafka:29092
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=16384
spring.kafka.producer.buffer-memory=33554432
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
# ✅ JSON for complex objects (individual topics)
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# Kafka Topic Names - REVERTED TO SIMPLE ARCHITECTURE
app.kafka.topic.raw-rates=financial-raw-rates
app.kafka.topic.calculated-rates=financial-calculated-rates
app.kafka.topic.cross-rates=financial-cross-rates
app.kafka.topic.simple-rates=financial-simple-rates
# REMOVED: app.kafka.topic.batch-rates

app.kafka.topic.partitions=1
app.kafka.topic.replication=1

# Provider Authentication Configuration - DOCKER ENVIRONMENT
providers.rest.url=${REST_PROVIDER_URL:http://rest-rate-provider:8080}
providers.rest.username=${CLIENT_REST_USERNAME:rest_kullanici_adi}
providers.rest.password=${CLIENT_REST_PASSWORD:rest_sifre}
providers.tcp.host=${TCP_PROVIDER_HOST:tcp-rate-provider}
providers.tcp.port=${TCP_PROVIDER_PORT:8081}
providers.tcp.username=${CLIENT_TCP_USERNAME:tcp_kullanici_adi}
providers.tcp.password=${CLIENT_TCP_PASSWORD:tcp_sifre}

# Thread Pool Configuration
app.subscriber.threadpool.coreSize=5
app.subscriber.threadpool.maxSize=10
app.subscriber.threadpool.queueCapacity=25
app.calculation.threadpool.coreSize=2
app.calculation.threadpool.maxSize=5
app.calculation.threadpool.queueCapacity=10

# Provider Configuration
app.provider.tcp.default-port=8081
app.provider.rest.default-port=8080

# Resilience4j Configuration
resilience4j.retry.configs.default.maxAttempts=3
resilience4j.retry.configs.default.waitDuration=500ms
resilience4j.retry.configs.default.retryExceptions=java.io.IOException,java.util.concurrent.TimeoutException,org.springframework.web.reactive.function.client.WebClientRequestException,org.springframework.web.reactive.function.client.WebClientResponseException$ServiceUnavailable

resilience4j.circuitbreaker.configs.default.failureRateThreshold=50
resilience4j.circuitbreaker.configs.default.slowCallRateThreshold=100
resilience4j.circuitbreaker.configs.default.slowCallDurationThreshold=1s
resilience4j.circuitbreaker.configs.default.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.configs.default.slidingWindowType=COUNT_BASED
resilience4j.circuitbreaker.configs.default.slidingWindowSize=10
resilience4j.circuitbreaker.configs.default.minimumNumberOfCalls=5
resilience4j.circuitbreaker.configs.default.waitDurationInOpenState=30s
resilience4j.circuitbreaker.configs.default.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.configs.default.recordExceptions=java.io.IOException,java.util.concurrent.TimeoutException,org.springframework.web.reactive.function.client.WebClientRequestException

# Logging Configuration
logging.level.root=INFO
logging.level.org.springframework=WARN
logging.level.com.toyota=DEBUG
logging.level.com.toyota.tcpserver=INFO
logging.level.org.springframework.web.client=DEBUG
logging.level.org.springframework.http=DEBUG
logging.level.org.springframework.web.reactive.function.client=DEBUG
logging.level.reactor.netty.http.client=DEBUG


# Aggregator ayarları
app.aggregator.window-time-ms=5000
app.aggregator.max-time-skew-ms=2000
app.aggregator.enable-time-skew-check=true

# Cross rate ayarları  
app.cross-rate.enabled=true
app.cross-rate.base-currency=USD
app.cross-rate.calculation-strategy=MULTIPLY_DIVIDE

# Symbol ayarları
app.symbol.calculated-suffix=_AVG
app.symbol.cross-suffix=_CROSS
app.symbol.calc-suffix=_CALC
app.symbol.valid-currencies=USD,EUR,GBP,TRY

# Cache prefix
app.cache.key-prefix=toyota_rates
app.cache.cleanup-enabled=true